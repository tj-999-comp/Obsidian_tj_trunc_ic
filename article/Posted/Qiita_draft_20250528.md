title:【数学が分かりません】場合の数、重複組み合わせ

アルゴ式の下記問題が解けず、順に解説を見ていっているが、あまり理解できていない。
誰か教えて欲しい。

わかる問題から振り返っていく。

***
### グループ分け（2）
https://algo-method.com/tasks/784/

**問題文**
> カメのアルルの手元には $N$ 個のボールと $M$ 個の箱があります。 各ボールは区別ができませんが、各箱には $0$ ~ $M−1$ までの数字が書かれており区別できます。
> 
> 全てのボールを箱に入れるとき、入れ方が全部で何パターン考えられるか計算するプログラムを作成してください。 ただし、ボールが一つも入っていない箱があっても良いものとします。

シンプルです。
$N$ 個のボールと、 $M-1$ 個の仕切りに置き換えて考えれば、下記のような形になります。
$$
{}_{N+M-1}C_{N}
$$
一応コードも載せますが、これ以降は`combinations`関数に代入する値の違いなので、これ以降の問題では省略する予定です。
```python
import math
def combinations(n, r):
"""nCrを計算する関数"""
return math.factorial(n) // (math.factorial(r) * math.factorial(n - r))

N, M = map(int, input().split())
ans = combinations(N-1, N-M) if N >= M else 0
print(ans)
```
***
### グループ分け（3）
https://algo-method.com/tasks/785

**問題文**
> カメのアルルの手元には $N$ 個のボールと $M$ 個の箱があります。 各ボールは区別ができませんが、各箱には $0$ ~ $M−1$ までの数字が書かれており区別できます。
> 
> 全てのボールを箱に入れるとき、入れ方が全部で何パターン考えられるか計算するプログラムを作成してください。 ただし、**どの箱にも $1$ 個以上のボールを入れる必要がある**ものとします。

これはまだ分かります。
前提として、箱よりボールの数が少ない場合、どう頑張ってもボールが入らない箱が生まれます。

以下、そうでない場合を考えます。
$N = 5, M = 4$ とすると、箱4個、ボール5個。

箱:□、ボール:⚪︎で表現するとします。
一旦全ての箱にボールを一つ入れると、ボールが1つ余ります。

> [!NOTE]
□□□□
↑ ↑ ↑ ↑
⚪︎⚪︎⚪︎⚪︎　　⚪︎<余りです

あとは4つの箱のうち好きなものを選べばいいので、${}_4 C_1$ でよい。
正確に計算式を書くと、下記のようになる。
$$
{}_{(5-4)+(4−1)}​C_{5-4}​={}_4C_{1}
$$
一般化して $N, M$ を用いて表せば、下記の通り。
$$
{}_{(N−M)+(M−1)}​C_{N−M}​={}_{N−1​}C_{N−M}
$$


***
### グループ分け（4） ※省略
https://algo-method.com/tasks/786

今回の本筋とは外れるので、省略します。

***
### N個の整数（1）
https://algo-method.com/tasks/816

**問題文**
> 次の条件を満たす $N$ 個の自然数の組 $(A_{0}​,A_{1}​,…,A_{N−1}​)$ の個数を求めるプログラムを作成してください。
>   $$\displaystyle\sum_{i=0}^{N−1}​A_i​=M$$

とっかかりが分からなかったため、大人しく解説を読みました。
解説はこの通り語っていました。

以下解説を引用します。私のリアクションと共にどうぞ。


> 一見すると手がかりのない問題に見えますが、条件をわかりやすいものに言い換えてみましょう。

私：せやな、頼むわ。

> $N$ 個の整数を箱に例え、割り当てられる数の総和 $M$ をボールの個数に例えると、与えられた条件は次のように言い換えられます。
> - $N$ 個の箱にはそれぞれ 1 つ以上のボールが入る。
> - $N$ 個の箱に入っているボールの総和は $M$ 個である。

私：う、うん…？イメージがわかんなぁ。

> これは [グループ分け (3)](###グループ分け（3）)  の設定の $N,M$ を入れ替えたものなので

私：そんなわけなくない？

というわけで、この問題は例えたあたりからついていけなくなった形です。どういうこっちゃ…。
一応回答としては、文字通り" [グループ分け (3)](###グループ分け（3）)  の設定の $N,M$ を入れ替え"ればいいので、下記の計算式を表現すれば良いとのことでした。なんなら式変形もわからんねぇ。

$$
{}_{M−1​}C_{M-N}={}_{M−1​}C_{N−1}
$$

***
### N個の整数（2）
https://algo-method.com/tasks/817

**問題文**
>次の条件を満たす $N$ 個の整数の組 $(A_{0}​,A_{1}​,…,A_{N-1}​)$ の個数を求めるプログラムを作成してください。
> $$0<A_{0}​<A_{1}​<⋯<A_{N-1}​<M$$

…はぁ。
解説見ないとダメだなこりゃ。

以下解説です。

>詳細な解説はしばらくお待ちください🐢💦

…あら〜🐢💦

なお解答としては下記の計算式になるようです。どうして？
$$
{}_{M−1​}C_{N}
$$

***
### N個の整数（3）
https://algo-method.com/tasks/818

**問題文**
>次の条件を満たす $N$ 個の整数の組 $(A_{0}​,A_{1}​,…,A_{N-1}​)$ の個数を求めるプログラムを作成してください。
> $$0 \leq A_{0} \leq A_{1}​ \leq ⋯ \leq A_{N-1}​ \leq M$$

一問前がわからなかった以上、答え見るしかないですね🐢💦

以下解説の引用です。

>与えられた条件の不等号には等号がついているため、このままでは[N個の整数（2）](###N個の整数（2）)と同様に解くことはできません。 そこで、与えられた条件をうまく言い換えることを考えてみましょう。
>実は、$A,B$ が整数のとき、「$A≤B$」と 「$A<B+1$」 は等しいです。  
>これは次の $2$ つを示すことで証明できます。
　・$A≤B$ ならば $A<B+1$ であること
　・$A≥B+1$ ならば $A>B$ であること (対偶)
　上記の不等式を与えられた不等式の後ろから順に適用してみましょう。
>$$
0≤A_{0}​≤⋯≤A_{N-2}​≤A_{N-1}​≤M　\\　0≤A_{0}​≤⋯≤A_{N-2}​≤A_{N-1}​<M+1 \\ 0≤A_{0}​≤⋯≤A_{N-2}​<A_{N-1}​+1<M+2 \\ \dots \\ 0≤A_{0}​<⋯<A_{N-2}​+(N−2)<A_{N-1}​+(N−1)<M+N \\ 0<A_{0}​+1<⋯<A_{N-2}​+(N−1)<A_{N-1}​+N<M+N+1
$$　
>新しく $B_{i}​=A_{i}​+(i+1)$ という変数を用いて条件を見やすくすると
>$$0<B_{0}​<⋯<B_{N-2}​<B_{N-1}​<M+N+1$$
>となります。($B_{i}$​ と $A_{i}$​ は $1$ 対 $1$ で対応)

私：はいはい！ここまでは私もわかりますよ。それはそうですよね。

>これは[N個の整数（2）](###N個の整数（2）)と同じ形の条件なので、答えは ${}_{M+N}​C_{N}$​ です。

私：WHY?

という感じですね。ナンデェ、、？

***
### N個の整数 (4)
https://algo-method.com/tasks/822

**問題文**
>次の条件を満たす $N$ 個の整数の組 $(A_{0}​,A_{1}​,…,A_{N-1}​)$ の個数を求めるプログラムを作成してください。
>$$A_{i} \geq 0 (0 \leq i \leq N-1) \\ \displaystyle\sum_{i=0}^{N−1}​A_i​=M$$

私の心はだいぶ折れています。でも解説を見るととりあえず「なるほど！」とはなるかもしれません。見てみましょうか。

>条件を[N個の整数（1）](###N個の整数（1）)と同様に言い換えてみましょう。
>$N$ 個の整数を箱に例え、割り当てられる数の総和 $M$ をボールの個数に例えると、与えられた条件は次のように言い換えられます。
>・$N$ 個の箱にはそれぞれ $0$ 個以上のボールが入る。 (=ボールがなくてもよい)
>・$N$ 個の箱に入っているボールの総和は $M$ 個である。
>これは [グループ分け（2）](###グループ分け（2）) の設定の $N,M$ を入れ替えたものなので、答えは ${}_{M+N-1}​C_{M}$​ となります。

ポッキリ（心の折れる音）

もういいかな。一旦休憩です。
なんとか分かるようにならんかと、AI達に説明させたりしているんですけどね、あまりいい調子ではないです。プロンプト力にも難あり…。