---
title: 7-1. バブルチャートを作ってみよう
source: https://bellcurve.jp/statistics/course/20066.html
author:
  - "[[統計WEB]]"
published: 2019-01-24
created: 2025-06-02
description: 
tags:
  - clippings
  - Data_Science
  - Statistics
---
- Step0. 初級編
	- 7\. データの相関
		- [7-1.バブルチャートを作ってみよう](#7-1.バブルチャートを作ってみよう)
		- [7-2.データの相関を見てみよう](#7-2.データの相関を見てみよう)
		- [7-3.データの相関に注意しよう](#7-3.データの相関に注意しよう)

# 7-1.バブルチャートを作ってみよう
金木犀の香りがふわふわと漂う10月―――年に一度の運動会の日です。ねこ第1小学校の猫たちは皆はちまきを巻いて、今か今かと始まりの合図を待っています。普段は仲良しな1年生100匹も、20匹ずつ5つのチームに分かれてそれぞれのチームのはちまきをギュッと結んでいます。

次の表は、「玉入れ」に出場する1年生が9月に行った [体力テスト](https://bellcurve.jp/statistics/course/19607.html) の結果をまとめたものです。ここに示されている値は、各チームに属するそれぞれ20匹の猫たちの点数の平均値です。

| チーム | ボール投げ | 50m走 | 高跳び |
| --- | --- | --- | --- |
| 赤組 | 3.5 | 4 | 8 |
| 青組 | 7.5 | 4 | 4 |
| 黄組 | 6 | 7 | 6.5 |
| 緑組 | 4 | 7.5 | 4.5 |
| 白組 | 5 | 5 | 5 |

このように3種類のデータを含んでいる表は「バブルチャート」を使って可視化するのがおすすめです。バブルチャートとは、x軸（横軸）で1つ目のデータを、y軸（縦軸）で2つ目のデータを、そして点（バブル）の大きさで3つ目のデータを表します。上の表をバブルチャートにすると次のようになります。

[![](https://bellcurve.jp/statistics/wp-content/uploads/2019/01/fig1.png)](https://bellcurve.jp/statistics/wp-content/uploads/2019/01/fig1.png)

横軸がボール投げの点数の平均点を、縦軸が50m走の点数の平均点を表します。グラフ中のバブルの大きさが高跳びの点数の平均点を表します。

このグラフを見ると、青組はボール投げの平均得点が高いチームであることが分かります。緑組は50m走の平均得点が高いチームであることが分かります。バブルの大きさから、赤組は高跳びの平均得点が高いチームであることが分かります。さらに、黄組は3つの種目の平均得点がいずれも高めのチームであることも分かります。

別の例を見てみます。次の表は運動会の各競技に参加した猫たちの総数とその競技時間、および怪我をしてしまった猫の数をまとめたものです。

| 競技 | 参加匹数 | 競技時間（分） | 怪我した猫（匹） |
| --- | --- | --- | --- |
| 玉入れ | 100 | 20 | 4 |
| 綱引き | 150 | 30 | 8 |
| リレー | 50 | 15 | 1 |
| 毛糸玉ころがし | 75 | 25 | 5 |
| にぼし食い競走 | 60 | 30 | 5 |
| ムカデ競争 | 125 | 35 | 9 |
| 騎馬戦 | 200 | 40 | 15 |

この表を使ってバブルチャートを作ると次のようになります。横軸が各競技に参加した猫たちの総数、縦軸がその競技時間、バブルの大きさが怪我をしてしまった猫の数を表しています。

[![](https://bellcurve.jp/statistics/wp-content/uploads/2019/01/fig2.png)](https://bellcurve.jp/statistics/wp-content/uploads/2019/01/fig2.png)

このグラフを見ると、参加匹数の多い競技ほど競技時間が長く、また怪我をした猫の数も多い傾向があるということが分かります。

# 7-2.データの相関を見てみよう
[7-1章](https://bellcurve.jp/statistics/course/20066.html) で、「参加匹数の多い競技ほど競技時間が長く、また怪我をした猫の数も多い傾向がある」ということが分かりました。具体的にどのくらい強い関係があるのかを見るために、この章では「相関係数」を求めてみます。

相関係数を求めるにあたって、まず2種類のデータのみをグラフに表してみます。データは7-1章に掲載したものを使います。

| 競技 | 参加匹数 | 競技時間（分） | 怪我した猫（匹） |
| --- | --- | --- | --- |
| 玉入れ | 100 | 20 | 4 |
| 綱引き | 150 | 30 | 8 |
| リレー | 50 | 15 | 1 |
| 毛糸玉ころがし | 75 | 25 | 5 |
| にぼし食い競走 | 60 | 30 | 5 |
| ムカデ競争 | 125 | 35 | 9 |
| 騎馬戦 | 200 | 40 | 15 |

各競技の参加匹数と競技時間をプロットすると次のようになります。

[![](https://bellcurve.jp/statistics/wp-content/uploads/2019/01/795316b92fc766b0181f6fef074f03fa.png)](https://bellcurve.jp/statistics/wp-content/uploads/2019/01/795316b92fc766b0181f6fef074f03fa.png)

このようなグラフは「散布図」とよばれ、x軸（横軸）で1つ目のデータを、y軸（縦軸）で2つ目のデータを表します。

ここで示したデータのように、横軸の値（参加匹数）が増加すると縦軸の値（競技時間）も増加するという関係がある場合には「正の相関関係がある」といいます。逆に、横軸の値が増加すると縦軸の値は減少するという関係がある場合には「負の相関関係がある」といいます。

では、いよいよ相関係数を求めてみます。2つの要素xとyからなるn個のデータが得られたとき、その相関関係の強弱を表す相関係数は次の式から求められます。
$$  \displaystyle r_{xy}=\frac{\displaystyle \frac{1}{n} \sum_{i=1}^{n} (x_{i}-\overline{x})(y_{i}-\overline{y})}{\sqrt{\displaystyle \frac{1}{n} \sum_{i=1}^{n} (x_{i}-\overline{x})^{2}} \times \sqrt{\displaystyle\frac{1}{n} \sum_{i=1}^{n} (y_{i}-\overline{y})^{2}}} $$

<!-- ![ \displaystyle r_{xy}=\frac{\displaystyle \frac{1}{n} \sum_{i=1}^{n} (x_{i}-\overline{x})(y_{i}-\overline{y})}{\sqrt{\displaystyle \frac{1}{n} \sum_{i=1}^{n} (x_{i}-\overline{x})^{2}} \times \sqrt{\displaystyle\frac{1}{n} \sum_{i=1}^{n} (y_{i}-\overline{y})^{2}}} ](https://bellcurve.jp/statistics/wp-content/ql-cache/quicklatex.com-223b028c961f049ea60bcacf0230238b_l3.svg "Rendered by QuickLaTeX.com") -->

nはサンプルの数を、とはi番目のデータの値を、とはxとyのデータの平均値を表します。また、はi=1からi=nまでの値をすべて足したものということを意味します。

非常に複雑な式なので、実際の値を使って計算してみます。xを参加匹数、yを競技時間とします。それぞれの平均値は=108.6と=27.9です。

これらの値を使うと、相関係数は

$$ \displaystyle r_{xy}=\frac{\displaystyle \frac{1}{n} \sum_{i=1}^{n} (x_{i}-\overline{x})(y_{i}-\overline{y})}{\sqrt{\displaystyle \frac{1}{n} \sum_{i=1}^{n} (x_{i}-\overline{x})^{2}} \times \sqrt{\displaystyle\frac{1}{n} \sum_{i=1}^{n} (y_{i}-\overline{y})^{2}}} = \frac{304.08}{\sqrt{2476.53 \times 69.39}} = 0.77 $$

<!-- ![ \displaystyle r_{xy}=\frac{\displaystyle \frac{1}{n} \sum_{i=1}^{n} (x_{i}-\overline{x})(y_{i}-\overline{y})}{\sqrt{\displaystyle \frac{1}{n} \sum_{i=1}^{n} (x_{i}-\overline{x})^{2}} \times \sqrt{\displaystyle\frac{1}{n} \sum_{i=1}^{n} (y_{i}-\overline{y})^{2}}} = \frac{304.08}{\sqrt{2476.53 \times 69.39}} = 0.77 ](https://bellcurve.jp/statistics/wp-content/ql-cache/quicklatex.com-662111daae393e4724f4d79211d0532d_l3.svg "Rendered by QuickLaTeX.com") -->

と計算できます。この結果から、参加匹数と競技時間の間には非常に強い相関があることが分かります。

2つのデータの間に強い正の相関があるほど相関係数は1に近づきます。逆に、強い負の相関があるほど相関係数は-1に近づきます。また、相関が弱い場合には相関係数は0に近づきます。

[![](https://bellcurve.jp/statistics/wp-content/uploads/2019/01/fig3-2.png)](https://bellcurve.jp/statistics/wp-content/uploads/2019/01/fig3-2.png)
# 7-3.データの相関に注意しよう
相関係数を扱うときにはいくつかの注意点があります。ここでは、そのうち特に重要な3つのポイントについて詳しく説明します。

## ■1. 外れ値がある場合

「外れ値」とは、他のデータと比べて大きく外れた値のことです。例えば、次の「玉入れで入れた玉の数」と「毛糸玉ころがしでかかった時間」のデータをプロットしてみます。

| チーム | 玉入れ（個） | 毛糸玉ころがし（秒） |
| --- | --- | --- |
| 赤組 | 69 | 250 |
| 青組 | 58 | 240 |
| 黄組 | 55 | 480 |
| 緑組 | 67 | 230 |
| 白組 | 62 | 260 |

[![](https://bellcurve.jp/statistics/wp-content/uploads/2019/01/fig1-1.png)](https://bellcurve.jp/statistics/wp-content/uploads/2019/01/fig1-1.png)

このデータから相関係数を求めると-0.69となり、強い負の相関があることが分かります。しかしこのグラフを見ると、1つだけ大きく外れた点があるようです。「黄組」の毛糸玉ころがしでかかった時間です。実は、毛糸玉を転がしている途中で毛糸がほどけて黄組の猫たちに絡まってしまい、なかなかゴールできないというハプニングがあったのです。

そこで「黄組」のデータを外して残りの4組のデータのみを用いて相関係数を求めると、-0.10となります。5組のデータを使ったときよりも相関係数の値が小さくなりました。

このように、データに含まれる外れ値が相関係数の値に影響を及ぼしている場合があります。そのため、相関係数を求めるときにはまず散布図を作り、外れ値がないか等データの特徴を確認するようにしましょう。

## ■2. 元データを加工した場合

上で用いたデータのうち「毛糸玉ころがしでかかった時間」を「分」表記に変更してみました。

| チーム | 玉入れ（個） | 毛糸玉ころがし（分） |
| --- | --- | --- |
| 赤組 | 69 | 4.17 |
| 青組 | 58 | 4.00 |
| 黄組 | 55 | 8.00 |
| 緑組 | 67 | 3.83 |
| 白組 | 62 | 4.33 |

このデータから相関係数を求めると-0.69となります。この結果から分かるように、元のデータの単位を変えても相関係数は変化しません。

次に、「玉入れで入れた玉の数」に10を足したデータを使ってみます。

| チーム | 玉入れ（個） | 毛糸玉ころがし（秒） |
| --- | --- | --- |
| 赤組 | 79 | 250 |
| 青組 | 68 | 240 |
| 黄組 | 65 | 480 |
| 緑組 | 77 | 230 |
| 白組 | 72 | 260 |

このデータから求めた相関係数もやはり-0.69となります。このように、元のデータにある値を一律で足した場合でも相関係数は変化しません。

「玉入れで入れた玉の数」に2をかけたデータを使ってみます。

| チーム | 玉入れ（個） | 毛糸玉ころがし（秒） |
| --- | --- | --- |
| 赤組 | 138 | 250 |
| 青組 | 116 | 240 |
| 黄組 | 110 | 480 |
| 緑組 | 134 | 230 |
| 白組 | 124 | 260 |

このデータを用いても相関係数は-0.69となります。このように、元のデータにある値を一律でかけた場合でも相関係数は変化しません。

最後に、「玉入れで入れた玉の数」に-1をかけたデータを使ってみます。

| チーム | 玉入れ（個） | 毛糸玉ころがし（秒） |
| --- | --- | --- |
| 赤組 | \-69 | 250 |
| 青組 | \-58 | 240 |
| 黄組 | \-55 | 480 |
| 緑組 | \-67 | 230 |
| 白組 | \-62 | 260 |

このデータから相関係数を求めると0.69となります。このように2つのデータのうちどちらかの元データにある負の値を一律でかけた場合には相関係数の正負が逆転します。

ちなみに、両方のデータにある負の値を一律でかけた場合には、相関係数の正負は逆転しません。

## ■3. 直線関係ではない相関がある場合

次のデータは「ムカデ競争でころんだ猫の数」と「騎馬戦ではちまきを取った数（勝数）」をまとめたものです。このデータをプロットしてみます。

| 学年 | ムカデ競走（匹） | 騎馬戦（勝） |
| --- | --- | --- |
| 1年生 | 1 | 15 |
| 2年生 | 2 | 11 |
| 3年生 | 5 | 3 |
| 4年生 | 10 | 2 |
| 5年生 | 13 | 8 |
| 6年生 | 17 | 24 |

[![](https://bellcurve.jp/statistics/wp-content/uploads/2019/01/fig2-2.png)](https://bellcurve.jp/statistics/wp-content/uploads/2019/01/fig2-2.png)

このデータから相関係数を求めると、0.30となります。しかしこのグラフを見ると、二次関数的な関係があることが分かります。

[![](https://bellcurve.jp/statistics/wp-content/uploads/2019/01/fig3-4.png)](https://bellcurve.jp/statistics/wp-content/uploads/2019/01/fig3-4.png)

相関係数は2つのデータによる直線的な相関関係の強さを表すものであり、線形ではない場合には相関関係の強弱は正しく表すことができません。したがって、いきなり相関係数を計算するのではなく、まずはデータをプロットした散布図を確認するようにしましょう。